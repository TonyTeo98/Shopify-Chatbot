# LangChain æ¶æ„æ”¹é€ å¯è¡Œæ€§åˆ†æ

> ä¸€æ¬¡å…³äº"æ˜¯å¦åº”è¯¥ç”¨æ¡†æ¶é‡æ„è‡ªå®šä¹‰å®ç°"çš„æ·±åº¦æ€è€ƒï¼Œæ¢è®¨æŠ€æœ¯é€‰å‹ä¸­çš„æƒè¡¡ä¹‹é“

---

## ä¸€ã€é—®é¢˜çš„èµ·æº

### 1.1 æŠ€æœ¯èƒŒæ™¯

å½“å‰é¡¹ç›®ä½¿ç”¨**çº¯è‡ªå®šä¹‰å®ç°**ï¼š
- ç›´æ¥è°ƒç”¨ Anthropic SDK
- æ‰‹åŠ¨ç®¡ç†å¯¹è¯å†å²
- è‡ªå®šä¹‰ Tool ç³»ç»Ÿ
- è‡ªå»º Streaming å“åº”
- æ‰‹åŠ¨é›†æˆ Langfuse ç›‘æ§

**æ€è€ƒ**ï¼šæ—¢ç„¶ LangChain æä¾›äº†è¿™äº›èƒ½åŠ›ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ï¼Ÿæ”¹é€ ä¼šä¸ä¼šå¾ˆå¤æ‚ï¼Ÿ

### 1.2 ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªæƒ³æ³•ï¼Ÿ

**è§¦å‘å› ç´ **ï¼š
1. ğŸ”„ æƒ³è¦æ›´å®¹æ˜“åœ°åˆ‡æ¢ LLM ä¾›åº”å•†ï¼ˆClaude â†’ OpenAI â†’ Geminiï¼‰
2. ğŸ› ï¸ LangChain æœ‰ä¸°å¯Œçš„ç”Ÿæ€ï¼ˆRAGã€Vector Storeã€Agent ç­‰ï¼‰
3. ğŸ“Š LangChain çš„ Langfuse é›†æˆæ›´ç®€å•ï¼ˆä¸€è¡Œä»£ç ï¼‰
4. ğŸ—ï¸ "ç”¨æ¡†æ¶æ€»æ¯”è‡ªå·±é€ è½®å­å¥½"çš„å¸¸è§è§‚ç‚¹

**æœ¬è´¨é—®é¢˜**ï¼š**è‡ªå®šä¹‰å®ç° vs æ¡†æ¶æŠ½è±¡** çš„æ°¸æ’æŠ‰æ‹©

---

## äºŒã€å½“å‰æ¶æ„å‰–æ

### 2.1 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     chat.jsx (è·¯ç”±å±‚)                        â”‚
â”‚  â€¢ å¤„ç† HTTP è¯·æ±‚                                            â”‚
â”‚  â€¢ SSE å“åº”ç®¡ç†                                              â”‚
â”‚  â€¢ CORS å¤„ç†                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
      â”‚ claude.server â”‚             â”‚ tool.server  â”‚
      â”‚    (LLM)      â”‚             â”‚   (Tools)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚                               â”‚
             â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚        â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚       MCP Client (æ ¸å¿ƒå¤æ‚åº¦)       â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
      â”‚  â”‚ Storefront MCP Connection   â”‚  â”‚
      â”‚  â”‚ â€¢ åŠ¨æ€è·å– tools åˆ—è¡¨        â”‚  â”‚
      â”‚  â”‚ â€¢ Product search            â”‚  â”‚
      â”‚  â”‚ â€¢ JSON-RPC 2.0 protocol     â”‚  â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
      â”‚  â”‚ Customer MCP Connection     â”‚  â”‚
      â”‚  â”‚ â€¢ éœ€è¦ OAuth è®¤è¯            â”‚  â”‚
      â”‚  â”‚ â€¢ Token ç®¡ç† (DB)           â”‚  â”‚
      â”‚  â”‚ â€¢ auth_required æµç¨‹         â”‚  â”‚
      â”‚  â”‚ â€¢ Customer account tools    â”‚  â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
      â”‚ Database  â”‚    â”‚   Langfuse  â”‚
      â”‚ (SQLite)  â”‚    â”‚  (Manual)   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒç‰¹æ€§ä¸å¤æ‚åº¦

| ç»„ä»¶ | è‡ªå®šä¹‰å®ç° | å¤æ‚åº¦ | åŸå›  |
|------|----------|--------|------|
| **MCP Client** | å®Œå…¨è‡ªå®šä¹‰ | â­â­â­â­â­ | åè®®ç‰¹æ®Šã€åŠ¨æ€ toolsã€OAuth |
| **Streaming** | SSE + è‡ªå®šä¹‰äº‹ä»¶ | â­â­â­ | å¤šç§äº‹ä»¶ç±»å‹ï¼ˆchunkã€productsã€authï¼‰ |
| **Tool System** | æ‰‹åŠ¨æ ¼å¼åŒ– + æ‰§è¡Œ | â­â­â­â­ | Product å±•ç¤ºã€é”™è¯¯å¤„ç†ã€auth flow |
| **Memory** | æ•°æ®åº“ + æ‰‹åŠ¨ç®¡ç† | â­â­â­ | éœ€è¦åºåˆ—åŒ–ã€å¤šç§ content type |
| **Langfuse** | æ‰‹åŠ¨ tracing | â­â­â­ | éœ€è¦æ˜¾å¼åˆ›å»º spans |

### 2.3 ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿï¼ˆè®¾è®¡å†³ç­–ï¼‰

#### å†³ç­– 1ï¼šç›´æ¥ç”¨ Anthropic SDK

**åŸå› **ï¼š
- âœ… æ€§èƒ½æœ€ä¼˜ï¼ˆæ— ä¸­é—´å±‚å¼€é”€ï¼‰
- âœ… å®Œå…¨æ§åˆ¶æ‰€æœ‰ç»†èŠ‚
- âœ… è°ƒè¯•ç®€å•ç›´æ¥
- âœ… ç±»å‹å®‰å…¨ï¼ˆTypeScriptï¼‰

**ä»£ä»·**ï¼š
- âŒ åˆ‡æ¢æ¨¡å‹éœ€è¦æ”¹ä»£ç 
- âŒ éœ€è¦æ‰‹åŠ¨å¤„ç†å¾ˆå¤šç»†èŠ‚

#### å†³ç­– 2ï¼šè‡ªå®šä¹‰ MCP é›†æˆ

**åŸå› **ï¼š
- âš ï¸ **æ ¸å¿ƒåŸå› **ï¼šMCP (Model Context Protocol) æ˜¯ Anthropic çš„ç‰¹æ®Šåè®®
- âš ï¸ LangChainã€LlamaIndex ç­‰æ¡†æ¶éƒ½**ä¸æ”¯æŒ** MCP
- âš ï¸ å¿…é¡»è‡ªå·±å®ç°

**ç‰¹æ®Šæ€§**ï¼š
```javascript
// MCP çš„ç‰¹æ®Šä¹‹å¤„
1. åŠ¨æ€ Toolsï¼šè¿æ¥åæ‰çŸ¥é“æœ‰å“ªäº› toolsï¼ˆä¸æ˜¯é™æ€æ³¨å†Œï¼‰
2. OAuth æµç¨‹ï¼šéœ€è¦ä¸å‰ç«¯äº¤äº’å®Œæˆè®¤è¯
3. auth_requiredï¼štool æ‰§è¡Œæ—¶å¯èƒ½è¦æ±‚è®¤è¯
4. åŒç«¯ç‚¹ï¼šStorefront MCP + Customer MCP
5. JSON-RPC 2.0ï¼šç‰¹å®šçš„é€šä¿¡åè®®
```

è¿™æ˜¯**æ— æ³•é¿å…çš„è‡ªå®šä¹‰å®ç°**ï¼Œå³ä½¿ç”¨ LangChain ä¹Ÿå¾—è‡ªå·±åŒ…è£…ã€‚

#### å†³ç­– 3ï¼šSSE Streaming

**åŸå› **ï¼š
- âœ… éœ€è¦å‘å‰ç«¯å‘é€å¤šç§äº‹ä»¶ç±»å‹
- âœ… ä¸ä»…æ˜¯æ–‡æœ¬ï¼Œè¿˜æœ‰äº§å“å¡ç‰‡ã€è®¤è¯è¯·æ±‚

```javascript
// éœ€è¦å‘é€çš„äº‹ä»¶ç±»å‹
{type: 'chunk', chunk: '...'}           // æ–‡æœ¬æµ
{type: 'products', products: [...]}     // äº§å“å¡ç‰‡
{type: 'auth_required'}                 // éœ€è¦è®¤è¯
{type: 'id', conversation_id: '...'}    // ä¼šè¯ ID
```

è¿™ç§**å¤šç±»å‹äº‹ä»¶**çš„éœ€æ±‚ï¼Œä½¿å¾—æ ‡å‡†æ¡†æ¶çš„ streaming ä¸å¤Ÿç”¨ã€‚

---

## ä¸‰ã€LangChain æ”¹é€ å¤æ‚åº¦è¯„ä¼°

### 3.1 æ”¹é€ èŒƒå›´çŸ©é˜µ

| ç»„ä»¶ | æ”¹é€ ç±»å‹ | LangChain æ–¹æ¡ˆ | æŒ‘æˆ˜ | å·¥ä½œé‡ |
|------|---------|---------------|------|--------|
| **LLM è°ƒç”¨** | ğŸ” æ›¿æ¢ | `ChatAnthropic` | â­â­ ç®€å• | 0.5 å¤© |
| **Streaming** | ğŸ”¨ é‡æ„ | Callback-based streaming | â­â­â­ ä¸­ç­‰ | 1-2 å¤© |
| **Tool System** | ğŸ”¨ é‡æ„ | `@langchain/core/tools` | â­â­â­â­ å¤æ‚ | 2-3 å¤© |
| **Memory** | ğŸ” æ›¿æ¢ | `BufferMemory` / `ChatMessageHistory` | â­â­â­ ä¸­ç­‰ | 1-2 å¤© |
| **MCP Client** | âš ï¸ åŒ…è£… | è‡ªå®šä¹‰ StructuredTool | â­â­â­â­â­ æå¤æ‚ | 3-4 å¤© |
| **Product Display** | ğŸ”§ é€‚é… | Callback Handler | â­â­â­ ä¸­ç­‰ | 1 å¤© |
| **Auth Flow** | ğŸ”§ é€‚é… | è‡ªå®šä¹‰é”™è¯¯å¤„ç† | â­â­â­â­ å¤æ‚ | 2 å¤© |
| **Langfuse** | ğŸ‰ ç®€åŒ– | `LangfuseCallbackHandler` | â­ ç®€å• | 0.5 å¤© |

**æ€»å·¥ä½œé‡**ï¼š10-15 å¤©

### 3.2 æ ¸å¿ƒæŒ‘æˆ˜æ·±åº¦åˆ†æ

#### æŒ‘æˆ˜ 1ï¼šMCP åè®®çš„ç‰¹æ®Šæ€§ ğŸ”´ æéš¾

**é—®é¢˜æè¿°**ï¼š
LangChain çš„ Tool ç³»ç»ŸæœŸæœ›ï¼š
```typescript
// LangChain æœŸæœ›ï¼šé™æ€å®šä¹‰ã€åŒæ­¥æ³¨å†Œ
const tools = [
  new SearchTool(),
  new CalculatorTool(),
  new WeatherTool()
];

const agent = createToolCallingAgent({ llm, tools });
```

ä½† MCP çš„å®é™…æƒ…å†µï¼š
```javascript
// MCP å®é™…ï¼šåŠ¨æ€åŠ è½½ã€å¼‚æ­¥è¿æ¥
const mcpClient = new MCPClient(shopDomain, conversationId);

// 1. å¿…é¡»å…ˆè¿æ¥æ‰çŸ¥é“æœ‰å“ªäº› tools
await mcpClient.connectToStorefrontServer();
await mcpClient.connectToCustomerServer();

// 2. tools åˆ—è¡¨æ˜¯åŠ¨æ€çš„ï¼Œæ¯ä¸ªåº—é“ºå¯èƒ½ä¸åŒ
console.log(mcpClient.tools);  // [tool1, tool2, ...]

// 3. æ‰§è¡Œ tool å¯èƒ½éœ€è¦è®¤è¯
const result = await mcpClient.callTool("search_products", {query: "..."});

if (result.error?.type === "auth_required") {
  // 4. éœ€è¦ä¸å‰ç«¯äº¤äº’å®Œæˆ OAuth
  stream.sendMessage({type: 'auth_required'});
  // ç­‰å¾…ç”¨æˆ·æˆæƒ...
  // é‡è¯• tool è°ƒç”¨
}
```

**LangChain åŒ…è£…æ–¹æ¡ˆ**ï¼š
```typescript
// æ–¹æ¡ˆï¼šåŠ¨æ€åˆ›å»º LangChain Tools
class DynamicMCPTool extends StructuredTool {
  name: string;
  description: string;
  schema: z.ZodObject<any>;

  constructor(
    private mcpClient: MCPClient,
    private toolDef: MCPToolDefinition,
    private sseStream: SSEStream  // âš ï¸ éœ€è¦ä¼ é€’ stream ç”¨äº auth
  ) {
    super();
    this.name = toolDef.name;
    this.description = toolDef.description;
    this.schema = this.convertToZod(toolDef.inputSchema);
  }

  async _call(input: any): Promise<string> {
    const result = await this.mcpClient.callTool(this.name, input);

    // é—®é¢˜1: å¦‚ä½•å¤„ç† auth_requiredï¼Ÿ
    if (result.error?.type === "auth_required") {
      this.sseStream.sendMessage({type: 'auth_required'});

      // é—®é¢˜2: å¦‚ä½•ç­‰å¾…ç”¨æˆ·å®Œæˆ OAuthï¼Ÿ
      // LangChain Tool çš„ _call æ˜¯åŒæ­¥æµç¨‹ï¼Œæ— æ³•æš‚åœç­‰å¾…

      throw new Error("Authentication required");
    }

    // é—®é¢˜3: å¦‚ä½•è¿”å›ç»“æ„åŒ–æ•°æ®ï¼ˆäº§å“åˆ—è¡¨ï¼‰ï¼Ÿ
    // LangChain Tool æœŸæœ›è¿”å› stringï¼Œä½†æˆ‘ä»¬æœ‰å¤æ‚å¯¹è±¡
    return JSON.stringify(result.content);
  }
}

// ä½¿ç”¨
async function createAgent(mcpClient: MCPClient, stream: SSEStream) {
  // å…ˆè¿æ¥è·å– tools
  await mcpClient.connectToStorefrontServer();
  await mcpClient.connectToCustomerServer();

  // åŠ¨æ€åˆ›å»º LangChain tools
  const tools = mcpClient.tools.map(toolDef =>
    new DynamicMCPTool(mcpClient, toolDef, stream)
  );

  // é—®é¢˜4: æ¯æ¬¡è¯·æ±‚éƒ½è¦é‡æ–°åˆ›å»º agentï¼Ÿæ•ˆç‡ä½
  const agent = createToolCallingAgent({ llm, tools });

  return agent;
}
```

**æ ¸å¿ƒçŸ›ç›¾**ï¼š
| LangChain å‡è®¾ | MCP ç°å® | å†²çª |
|---------------|---------|------|
| é™æ€ Tools | åŠ¨æ€ Tools | éœ€è¦æ¯æ¬¡è¯·æ±‚é‡æ–°åˆ›å»º |
| åŒæ­¥æ‰§è¡Œ | å¼‚æ­¥ + ç­‰å¾…æˆæƒ | æµç¨‹æ— æ³•æš‚åœ |
| å­—ç¬¦ä¸²è¿”å› | ç»“æ„åŒ–æ•°æ® | éœ€è¦åºåˆ—åŒ–/ååºåˆ—åŒ– |
| ç‹¬ç«‹å·¥å…· | éœ€è¦å…±äº«çŠ¶æ€ï¼ˆtokenã€streamï¼‰ | æ¶æ„ä¸åŒ¹é… |

**ç»“è®º**ï¼šâš ï¸ **å¯ä»¥å®ç°ï¼Œä½†éå¸¸åˆ«æ‰­ï¼Œå¤±å»äº†æ¡†æ¶çš„ä¼˜åŠ¿**

---

#### æŒ‘æˆ˜ 2ï¼šStreaming äº‹ä»¶ç±»å‹ä¸åŒ¹é… ğŸŸ¡ ä¸­ç­‰

**å½“å‰å®ç°**ï¼š
```javascript
// è‡ªå®šä¹‰ SSEï¼Œæ”¯æŒå¤šç§äº‹ä»¶ç±»å‹
stream.sendMessage({type: 'id', conversation_id: '123'});
stream.sendMessage({type: 'chunk', chunk: 'Hello'});
stream.sendMessage({type: 'products', products: [...]});
stream.sendMessage({type: 'auth_required'});
stream.sendMessage({type: 'done'});
```

**LangChain Streaming**ï¼š
```typescript
// LangChain åŸºäº Callback
const callbacks = [
  {
    handleLLMNewToken(token: string) {
      // âœ… å¯ä»¥å‘é€æ–‡æœ¬
      stream.sendMessage({type: 'chunk', chunk: token});
    },

    handleToolStart(tool: Tool, input: string) {
      // ğŸ¤” tool å¼€å§‹ï¼Œä½†è¿˜æ²¡ç»“æœ
    },

    handleToolEnd(output: string) {
      // âŒ åªæœ‰å­—ç¬¦ä¸²è¾“å‡ºï¼Œå¦‚ä½•å‘é€äº§å“å¡ç‰‡ï¼Ÿ
      // äº§å“ä¿¡æ¯åœ¨è¿™é‡Œå·²ç»ä¸¢å¤±äº†ç»“æ„
    },

    handleLLMError(error: Error) {
      // âŒ å¦‚ä½•åŒºåˆ†æ˜¯ auth_required è¿˜æ˜¯çœŸæ­£çš„é”™è¯¯ï¼Ÿ
    }
  }
];

const stream = await agent.stream({input: message}, {callbacks});
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// éœ€è¦è‡ªå®šä¹‰ Callback Handler
class CustomStreamingHandler extends BaseCallbackHandler {
  constructor(
    private sseStream: SSEStream,
    private toolService: ToolService
  ) {
    super();
  }

  handleLLMNewToken(token: string) {
    this.sseStream.sendMessage({type: 'chunk', chunk: token});
  }

  handleToolEnd(output: string, runId: string, parentRunId?: string, tags?: string[]) {
    // é—®é¢˜ï¼šéœ€è¦ä» tags åˆ¤æ–­æ˜¯ä»€ä¹ˆ tool
    if (tags?.includes('search_shop_catalog')) {
      // é—®é¢˜ï¼šoutput æ˜¯ JSON å­—ç¬¦ä¸²ï¼Œéœ€è¦è§£æ
      const result = JSON.parse(output);
      const products = this.toolService.processProductSearchResult(result);

      // å‘é€äº§å“å¡ç‰‡
      this.sseStream.sendMessage({
        type: 'products',
        products
      });
    }
  }

  handleToolError(error: Error) {
    // é—®é¢˜ï¼šå¦‚ä½•åˆ¤æ–­æ˜¯ auth_requiredï¼Ÿ
    // éœ€è¦è§£æ error message æˆ–ä½¿ç”¨è‡ªå®šä¹‰ Error ç±»
    if (error.message.includes('auth_required')) {
      this.sseStream.sendMessage({type: 'auth_required'});
    }
  }
}
```

**æƒè¡¡**ï¼š
- âœ… å¯ä»¥å®ç°æ‰€éœ€åŠŸèƒ½
- âŒ ä»£ç åˆ†æ•£ã€é€»è¾‘ä¸ç›´è§‚
- âŒ ä¾èµ–å­—ç¬¦ä¸²è§£æå’Œ tags

---

#### æŒ‘æˆ˜ 3ï¼šAgent æ§åˆ¶æµ vs è‡ªå®šä¹‰æµç¨‹ ğŸŸ¡ ä¸­ç­‰

**å½“å‰æµç¨‹**ï¼ˆå®Œå…¨å¯æ§ï¼‰ï¼š
```javascript
let finalMessage = userMessage;

// è‡ªå·±æ§åˆ¶å¾ªç¯
while (finalMessage.stop_reason !== "end_turn") {
  finalMessage = await claudeService.streamConversation(
    {messages: history, tools},
    {
      onText: (text) => stream.sendMessage({type: 'chunk', chunk: text}),
      onToolUse: async (toolUse) => {
        // 1. è°ƒç”¨ tool
        const result = await mcpClient.callTool(toolUse.name, toolUse.input);

        // 2. æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯
        if (result.error?.type === "auth_required") {
          stream.sendMessage({type: 'auth_required'});
          return;  // æš‚åœæµç¨‹
        }

        // 3. å¤„ç†äº§å“å±•ç¤º
        if (toolUse.name === "search_shop_catalog") {
          const products = processProducts(result);
          stream.sendMessage({type: 'products', products});
        }

        // 4. æ·»åŠ åˆ°å†å²
        history.push({role: 'user', content: [{type: 'tool_result', ...}]});
      }
    }
  );

  // è‡ªå·±å†³å®šæ˜¯å¦ç»§ç»­
  if (needsAuth) break;
}
```

**LangChain Agent Executor**ï¼ˆæ§åˆ¶æƒç§»äº¤ï¼‰ï¼š
```typescript
// LangChain æ§åˆ¶å¾ªç¯
const executor = new AgentExecutor({ agent, tools });

// ä¸€æ¬¡è°ƒç”¨ï¼Œå†…éƒ¨å¾ªç¯
for await (const step of executor.stream({input: message})) {
  // é—®é¢˜1: å¾ªç¯åœ¨ LangChain å†…éƒ¨ï¼Œæ— æ³•ä¸­æ–­
  // é—®é¢˜2: å¦‚ä½•åœ¨ auth_required æ—¶æš‚åœï¼Ÿ
  // é—®é¢˜3: å¦‚ä½•è‡ªå®šä¹‰æ¯ä¸€æ­¥çš„è¡Œä¸ºï¼Ÿ

  if (step.intermediateSteps) {
    // tool æ‰§è¡Œç»“æœ
    // ä½†å·²ç»æ— æ³•é˜»æ­¢ç»§ç»­æ‰§è¡Œ
  }
}
```

**æ ¹æœ¬çŸ›ç›¾**ï¼š
- **è‡ªå®šä¹‰å®ç°**ï¼šæˆ‘ä»¬æ§åˆ¶æµç¨‹ï¼Œçµæ´»ä½†ç¹ç
- **Agent Executor**ï¼šæ¡†æ¶æ§åˆ¶æµç¨‹ï¼Œç®€å•ä½†ä¸çµæ´»

å¯¹äº **éœ€è¦ç”¨æˆ·äº¤äº’çš„æµç¨‹**ï¼ˆå¦‚ OAuthï¼‰ï¼ŒAgent Executor ä¸é€‚åˆã€‚

---

### 3.3 æ”¹é€ æ–¹æ¡ˆå¯¹æ¯”

#### æ–¹æ¡ˆ Aï¼šå®Œå…¨ LangChain åŒ–ï¼ˆæ¿€è¿›ï¼‰

```typescript
// å®Œå…¨ç”¨ LangChain é‡å†™
import { ChatAnthropic } from "@langchain/anthropic";
import { AgentExecutor, createToolCallingAgent } from "langchain/agents";
import { BufferMemory } from "langchain/memory";
import { LangfuseCallbackHandler } from "langfuse-langchain";

// æ¶æ„
ChatAnthropic
  â†’ Agent Executor
    â†’ Dynamic MCP Tools (è‡ªå®šä¹‰åŒ…è£…)
      â†’ Custom Callback Handlers (SSEã€äº§å“å±•ç¤º)
        â†’ Custom Error Handling (auth_required)
```

**ä¼˜åŠ¿**ï¼š
- âœ… ç»Ÿä¸€æ¶æ„ï¼Œç¬¦åˆ"æ ‡å‡†"
- âœ… åˆ‡æ¢æ¨¡å‹åªéœ€æ¢ ChatClass
- âœ… Langfuse é›†æˆä¸€è¡Œä»£ç 
- âœ… å¯ç”¨ LangChain ç”Ÿæ€ï¼ˆæœªæ¥æ‰©å±• RAGï¼‰

**åŠ£åŠ¿**ï¼š
- âŒ å·¥ä½œé‡ï¼š**10-15 å¤©**
- âŒ MCP åŒ…è£…æå…¶å¤æ‚
- âŒ å¤±å»æµç¨‹æ§åˆ¶ï¼ˆauth flow éš¾å¤„ç†ï¼‰
- âŒ æ€§èƒ½å¯èƒ½ä¸‹é™ï¼ˆå¤šå±‚æŠ½è±¡ï¼‰
- âŒ è°ƒè¯•å›°éš¾ï¼ˆé»‘ç›’ Agent Executorï¼‰
- âŒ ä»£ç åˆ†æ•£ï¼ˆé€»è¾‘åœ¨å¤šä¸ª callback ä¸­ï¼‰

**é£é™©**ï¼šğŸ”´ğŸ”´ğŸ”´ğŸ”´ **é«˜é£é™©**
- å¯èƒ½é‡åˆ°æ— æ³•è§£å†³çš„æ¶æ„å†²çª
- æ”¹é€ è¿‡ç¨‹ä¸­åŠŸèƒ½å—å½±å“
- æ–° bug å¼•å…¥é£é™©é«˜

---

#### æ–¹æ¡ˆ Bï¼šæ¸è¿›å¼é›†æˆï¼ˆåŠ¡å®ï¼‰

```typescript
// åªåœ¨åˆé€‚çš„åœ°æ–¹ç”¨ LangChain
import { ChatAnthropic } from "@langchain/anthropic";
import { LangfuseCallbackHandler } from "langfuse-langchain";

export function createClaudeService() {
  // 1. ç”¨ LangChain çš„ LLM ç±»
  const llm = new ChatAnthropic({
    modelName: "claude-sonnet-4-5-20250929",
    streaming: true,
    callbacks: [new LangfuseCallbackHandler()],  // ğŸ‰ è‡ªåŠ¨ tracing
  });

  const streamConversation = async ({messages, tools}, handlers) => {
    // 2. ä¿ç•™è‡ªå®šä¹‰çš„æµç¨‹æ§åˆ¶
    while (shouldContinue) {
      const stream = await llm.stream(messages, {
        tools: formatTools(tools),  // 3. è‡ªå·±è½¬æ¢æ ¼å¼
      });

      for await (const chunk of stream) {
        handlers.onText(chunk.content);

        // 4. ä¿ç•™è‡ªå®šä¹‰çš„ tool handling
        if (chunk.tool_calls) {
          for (const toolCall of chunk.tool_calls) {
            const result = await mcpClient.callTool(
              toolCall.name,
              toolCall.args
            );

            // 5. ä¿ç•™ç°æœ‰çš„ authã€äº§å“å±•ç¤ºé€»è¾‘
            if (result.error?.type === "auth_required") {
              stream.sendMessage({type: 'auth_required'});
              break;
            }

            if (toolCall.name === "search_shop_catalog") {
              const products = processProducts(result);
              stream.sendMessage({type: 'products', products});
            }
          }
        }
      }
    }
  };

  return { streamConversation };
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… å·¥ä½œé‡ï¼š**3-5 å¤©**
- âœ… Langfuse é›†æˆç®€åŒ–
- âœ… ä¿ç•™æµç¨‹æ§åˆ¶
- âœ… ä¿ç•™ç¨³å®šçš„ MCP é€»è¾‘
- âœ… é£é™©å¯æ§
- âœ… å¯ä»¥é€æ­¥è¿ç§»

**åŠ£åŠ¿**ï¼š
- âš ï¸ æ··åˆæ¶æ„ï¼ˆéƒ¨åˆ† LangChain + éƒ¨åˆ†è‡ªå®šä¹‰ï¼‰
- âš ï¸ ä¸èƒ½ç”¨ Agent Executor
- âš ï¸ ä¸ç®—"æ ‡å‡†" LangChain ç”¨æ³•

**é£é™©**ï¼šğŸŸ¡ **ä¸­ä½é£é™©**

---

#### æ–¹æ¡ˆ Cï¼šä¿æŒç°çŠ¶ + ä¼˜åŒ–ï¼ˆä¿å®ˆï¼‰

```typescript
// ä¸ç”¨ LangChainï¼Œä¼˜åŒ–ç°æœ‰æ¶æ„
// 1. åˆ›å»ºä¾›åº”å•†æŠ½è±¡å±‚
export class LLMProvider {
  abstract streamConversation(...): Promise<Message>;
}

export class AnthropicProvider extends LLMProvider {
  // å½“å‰å®ç°
}

export class OpenAIProvider extends LLMProvider {
  // æ–°å¢ï¼šOpenAI é€‚é…
}

// 2. å·¥å‚å‡½æ•°
export function createLLMService(provider = "anthropic") {
  const providers = {
    anthropic: AnthropicProvider,
    openai: OpenAIProvider,
  };

  return new providers[provider]({
    apiKey: process.env[`${provider.toUpperCase()}_API_KEY`]
  });
}

// 3. ä¼˜åŒ– Langfuse é›†æˆï¼ˆä¿æŒæ‰‹åŠ¨ï¼‰
// 4. å¢åŠ å•å…ƒæµ‹è¯•
// 5. æ”¹è¿›é”™è¯¯å¤„ç†
```

**ä¼˜åŠ¿**ï¼š
- âœ… å·¥ä½œé‡ï¼š**0 å¤©**ï¼ˆæ— æ”¹é€ ï¼‰+ åç»­ä¼˜åŒ– 2-3 å¤©
- âœ… é›¶é£é™©ï¼ˆä¸æ”¹åŠ¨æ ¸å¿ƒé€»è¾‘ï¼‰
- âœ… å®Œå…¨æ§åˆ¶
- âœ… æ€§èƒ½æœ€ä¼˜
- âœ… è°ƒè¯•ç®€å•

**åŠ£åŠ¿**ï¼š
- âŒ éœ€è¦è‡ªå·±ç»´æŠ¤æ‰€æœ‰é€»è¾‘
- âŒ ä¸èƒ½ç”¨ LangChain ç”Ÿæ€
- âŒ åˆ‡æ¢æ¨¡å‹éœ€è¦æ”¹ä»£ç ï¼ˆä½†æœ‰æŠ½è±¡å±‚åä¹Ÿä¸éš¾ï¼‰

**é£é™©**ï¼šğŸŸ¢ **æ— é£é™©**

---

## å››ã€æ ¸å¿ƒæ´å¯Ÿä¸ç»éªŒæ€»ç»“

### 4.1 å…³é”®æ´å¯Ÿ

#### æ´å¯Ÿ 1ï¼šæ¡†æ¶é€‚ç”¨æ€§ä¸æ˜¯ç»å¯¹çš„

**ä¼ ç»Ÿè§‚å¿µ**ï¼š
> "èƒ½ç”¨æ¡†æ¶å°±ç”¨æ¡†æ¶ï¼Œä¸è¦é‡å¤é€ è½®å­"

**å®é™…æƒ…å†µ**ï¼š
> æ¡†æ¶æ˜¯ä¸º**é€šç”¨åœºæ™¯**è®¾è®¡çš„ï¼Œå½“ä½ çš„éœ€æ±‚**ç‰¹æ®Š**æ—¶ï¼Œæ¡†æ¶å¯èƒ½æˆä¸ºæŸç¼š

**æœ¬é¡¹ç›®çš„ç‰¹æ®Šæ€§**ï¼š
1. **MCP åè®®**ï¼šLangChain ä¸æ”¯æŒï¼Œå¿…é¡»è‡ªå·±å®ç°
2. **å¤šç±»å‹äº‹ä»¶**ï¼šä¸åªæ˜¯æ–‡æœ¬ï¼Œè¿˜æœ‰äº§å“å¡ç‰‡ã€è®¤è¯è¯·æ±‚
3. **äº¤äº’å¼æµç¨‹**ï¼šéœ€è¦æš‚åœç­‰å¾…ç”¨æˆ·æˆæƒ
4. **åŒç«¯ç‚¹å·¥å…·**ï¼šStorefront + Customerï¼Œä¸åŒè®¤è¯æ–¹å¼

è¿™äº›ç‰¹æ€§ä½¿å¾—"ç”¨æ¡†æ¶"åè€Œæ›´å¤æ‚ã€‚

---

#### æ´å¯Ÿ 2ï¼šæ§åˆ¶æƒ vs ä¾¿åˆ©æ€§çš„æƒè¡¡

| ç»´åº¦ | è‡ªå®šä¹‰å®ç° | æ¡†æ¶ï¼ˆLangChainï¼‰ |
|------|----------|-----------------|
| **æ§åˆ¶æƒ** | ğŸŸ¢ å®Œå…¨æ§åˆ¶ | ğŸ”´ éƒ¨åˆ†ç§»äº¤ |
| **å¼€å‘é€Ÿåº¦** | ğŸŸ¡ æ…¢ï¼ˆæ ‡å‡†åœºæ™¯ï¼‰ | ğŸŸ¢ å¿«ï¼ˆæ ‡å‡†åœºæ™¯ï¼‰ |
| **è°ƒè¯•éš¾åº¦** | ğŸŸ¢ å®¹æ˜“ï¼ˆç›´æ¥ï¼‰ | ğŸ”´ å›°éš¾ï¼ˆé»‘ç›’ï¼‰ |
| **ç‰¹æ®Šéœ€æ±‚** | ğŸŸ¢ çµæ´» | ğŸ”´ å—é™ |
| **ç”Ÿæ€å·¥å…·** | ğŸ”´ éœ€è‡ªå·±æ‰¾ | ğŸŸ¢ å¼€ç®±å³ç”¨ |
| **å­¦ä¹ æ›²çº¿** | ğŸŸ¢ æ— ï¼ˆç›´æ¥ APIï¼‰ | ğŸ”´ é™¡å³­ï¼ˆå­¦æ¡†æ¶ï¼‰ |

**è§„å¾‹**ï¼š
- **æ ‡å‡†åœºæ™¯**ï¼ˆRAGã€ç®€å• Agentï¼‰â†’ æ¡†æ¶ä¼˜åŠ¿å¤§
- **ç‰¹æ®Šåœºæ™¯**ï¼ˆè‡ªå®šä¹‰åè®®ã€å¤æ‚æµç¨‹ï¼‰â†’ è‡ªå®šä¹‰ä¼˜åŠ¿å¤§

---

#### æ´å¯Ÿ 3ï¼šæ¶æ„å†³ç­–çš„æ—¶æœº

**é”™è¯¯åšæ³•**ï¼š
```
ä¸€å¼€å§‹å°±çº ç»“ â†’ "è¯¥ç”¨æ¡†æ¶è¿˜æ˜¯è‡ªå·±å†™ï¼Ÿ"
              â†’ èŠ±å¤§é‡æ—¶é—´ç ”ç©¶æ¡†æ¶
              â†’ å‘ç°ä¸é€‚åˆåˆæ¨å€’é‡æ¥
```

**æ­£ç¡®åšæ³•**ï¼š
```
1. å…ˆç”¨æœ€ç®€å•çš„æ–¹å¼å®ç°ï¼ˆMVPï¼‰
2. è·‘èµ·æ¥ï¼ŒéªŒè¯éœ€æ±‚
3. è¯†åˆ«å‡ºçœŸæ­£çš„ç—›ç‚¹
4. é’ˆå¯¹æ€§ä¼˜åŒ–æˆ–å¼•å…¥æ¡†æ¶
```

**æœ¬é¡¹ç›®å°±æ˜¯å¥½ä¾‹å­**ï¼š
- å…ˆç”¨ Anthropic SDK å¿«é€Ÿå®ç°
- åŠŸèƒ½è·‘é€šåæ‰è€ƒè™‘ä¼˜åŒ–
- ç°åœ¨æ˜ç¡®äº†ç—›ç‚¹ï¼ˆåˆ‡æ¢æ¨¡å‹ã€ç›‘æ§ï¼‰
- å¯ä»¥é’ˆå¯¹æ€§åœ°æ”¹è¿›ï¼ˆæŠ½è±¡å±‚ã€ä¼˜åŒ– Langfuseï¼‰

---

#### æ´å¯Ÿ 4ï¼š"æ ‡å‡†"ä¸ç­‰äº"æ­£ç¡®"

**å¿ƒç†é™·é˜±**ï¼š
> "åˆ«äººéƒ½ç”¨ LangChainï¼Œæˆ‘ä¸ç”¨æ˜¯ä¸æ˜¯ä¸å¤Ÿä¸“ä¸šï¼Ÿ"

**å®é™…æƒ…å†µ**ï¼š
> æŠ€æœ¯é€‰å‹æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼Œåªæœ‰**é€‚åˆ**ä¸**ä¸é€‚åˆ**

**åˆ¤æ–­æ ‡å‡†**ï¼š
1. âœ… èƒ½å¦è§£å†³é—®é¢˜ï¼Ÿ
2. âœ… å›¢é˜Ÿèƒ½å¦ç»´æŠ¤ï¼Ÿ
3. âœ… æ€§èƒ½æ˜¯å¦æ»¡è¶³ï¼Ÿ
4. âœ… æ‰©å±•æ€§å¦‚ä½•ï¼Ÿ
5. âœ… å­¦ä¹ æˆæœ¬å¤šå°‘ï¼Ÿ

å¦‚æœè‡ªå®šä¹‰å®ç°**æ»¡è¶³éœ€æ±‚ã€æ¸…æ™°æ˜“æ‡‚ã€æ€§èƒ½è‰¯å¥½**ï¼Œé‚£å°±æ˜¯å¥½æ–¹æ¡ˆã€‚

---

### 4.2 å†³ç­–æ¡†æ¶

#### ä½•æ—¶ç”¨æ¡†æ¶ï¼Ÿ

**é€‚åˆåœºæ™¯**ï¼š
- âœ… **æ ‡å‡†æµç¨‹**ï¼šç®€å•çš„ RAGã€æ–‡æ¡£é—®ç­”ã€åŸºç¡€ Agent
- âœ… **å¿«é€ŸåŸå‹**ï¼šéœ€è¦å¿«é€ŸéªŒè¯æƒ³æ³•
- âœ… **å›¢é˜Ÿç†Ÿæ‚‰**ï¼šå›¢é˜Ÿå·²ç»æœ‰ LangChain ç»éªŒ
- âœ… **ç”Ÿæ€ä¾èµ–**ï¼šéœ€è¦ç”¨åˆ°æ¡†æ¶çš„å…¶ä»–åŠŸèƒ½ï¼ˆVector Storeã€Retrieversï¼‰
- âœ… **å¤šæ¨¡å‹åˆ‡æ¢**ï¼šé¢‘ç¹åˆ‡æ¢ä¸åŒ LLM

**ä¸é€‚åˆåœºæ™¯**ï¼š
- âŒ **ç‰¹æ®Šåè®®**ï¼šè‡ªå®šä¹‰çš„é€šä¿¡åè®®ï¼ˆå¦‚ MCPï¼‰
- âŒ **å¤æ‚æµç¨‹**ï¼šéœ€è¦ç²¾ç»†æ§åˆ¶æ¯ä¸€æ­¥
- âŒ **å¤šç±»å‹è¾“å‡º**ï¼šä¸åªæ˜¯æ–‡æœ¬ï¼Œè¿˜æœ‰ç»“æ„åŒ–æ•°æ®ã€UI ç»„ä»¶
- âŒ **æ€§èƒ½å…³é”®**ï¼šå¯¹å»¶è¿Ÿæåº¦æ•æ„Ÿ
- âŒ **å›¢é˜Ÿä¸ç†Ÿ**ï¼šæ²¡äººæ‡‚æ¡†æ¶ï¼Œå­¦ä¹ æˆæœ¬é«˜

#### ä½•æ—¶è‡ªå®šä¹‰ï¼Ÿ

**é€‚åˆåœºæ™¯**ï¼š
- âœ… **ç‰¹æ®Šéœ€æ±‚**ï¼šæ¡†æ¶ä¸æ”¯æŒæˆ–æ”¯æŒä¸å¥½
- âœ… **æ€§èƒ½ä¼˜å…ˆ**ï¼šéœ€è¦æè‡´æ€§èƒ½
- âœ… **å®Œå…¨æŒæ§**ï¼šéœ€è¦æ§åˆ¶æ¯ä¸ªç»†èŠ‚
- âœ… **ç®€å•åœºæ™¯**ï¼šåŠŸèƒ½ç®€å•ï¼Œæ¡†æ¶åè€Œå¤æ‚
- âœ… **é•¿æœŸç»´æŠ¤**ï¼šå›¢é˜Ÿæœ‰èƒ½åŠ›é•¿æœŸç»´æŠ¤

**ä¸é€‚åˆåœºæ™¯**ï¼š
- âŒ **é‡å¤é€ è½®å­**ï¼šæ¡†æ¶å·²ç»å¾ˆå¥½åœ°è§£å†³äº†
- âŒ **å¿«é€Ÿè¿­ä»£**ï¼šæ²¡æ—¶é—´è‡ªå·±å®ç°
- âŒ **ç¼ºä¹ç»éªŒ**ï¼šä¸çŸ¥é“æ€ä¹ˆå®ç°
- âŒ **éœ€è¦ç”Ÿæ€**ï¼šä¾èµ–å‘¨è¾¹å·¥å…·

---

### 4.3 æœ¬é¡¹ç›®çš„æœ€ä½³å®è·µ

#### å½“å‰çŠ¶æ€è¯„ä¼°

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **ä»£ç æ¸…æ™°åº¦** | â­â­â­â­ | æ¨¡å—åŒ–è‰¯å¥½ï¼Œé€»è¾‘æ¸…æ™° |
| **å¯ç»´æŠ¤æ€§** | â­â­â­â­ | è‡ªå®šä¹‰é€»è¾‘ï¼Œå®¹æ˜“ç†è§£ |
| **æ€§èƒ½** | â­â­â­â­â­ | æ— ä¸­é—´å±‚ï¼Œæ€§èƒ½æœ€ä¼˜ |
| **æ‰©å±•æ€§** | â­â­â­ | åˆ‡æ¢æ¨¡å‹éœ€è¦æ”¹ä»£ç  |
| **ç”Ÿæ€å·¥å…·** | â­â­ | æ— æ³•ç›´æ¥ç”¨æ¡†æ¶å·¥å…· |

**ç»“è®º**ï¼šå½“å‰æ¶æ„**å·²ç»å¾ˆå¥½**ï¼Œä¸éœ€è¦å¤§æ”¹ã€‚

#### æ¨èçš„æ”¹è¿›è·¯å¾„

```
é˜¶æ®µ 1ï¼šä¼˜åŒ–ç°æœ‰æ¶æ„ï¼ˆ1-2 å‘¨ï¼‰
â”œâ”€ åˆ›å»º LLM ä¾›åº”å•†æŠ½è±¡å±‚
â”œâ”€ ä¼˜åŒ– Langfuse é›†æˆ
â”œâ”€ æ·»åŠ å•å…ƒæµ‹è¯•
â””â”€ æ–‡æ¡£å®Œå–„

é˜¶æ®µ 2ï¼šæŒ‰éœ€å¼•å…¥æ¡†æ¶ï¼ˆæŒ‰éœ€ï¼‰
â”œâ”€ æ–°åŠŸèƒ½ç”¨ LangChain å®ç°ï¼ˆå¦‚ RAGï¼‰
â”œâ”€ è¯„ä¼°æ•ˆæœ
â””â”€ å†³å®šæ˜¯å¦æ‰©å¤§ä½¿ç”¨

é˜¶æ®µ 3ï¼šæŒç»­ä¼˜åŒ–ï¼ˆæŒç»­ï¼‰
â”œâ”€ ç›‘æ§æ€§èƒ½æŒ‡æ ‡
â”œâ”€ æ”¶é›†ç”¨æˆ·åé¦ˆ
â””â”€ è¿­ä»£æ”¹è¿›
```

**æ ¸å¿ƒåŸåˆ™**ï¼š
1. ğŸ¯ **ä¸è¦ä¸ºäº†"æ ‡å‡†"è€Œæ”¹é€ **
2. ğŸ¯ **åªä¼˜åŒ–çœŸæ­£çš„ç—›ç‚¹**
3. ğŸ¯ **ä¿æŒç®€å•ã€å¯ç»´æŠ¤**
4. ğŸ¯ **æ¸è¿›å¼æ¼”è¿›ï¼Œä¸åšå¤§çˆ†ç‚¸é‡æ„**

---

## äº”ã€å¯å¤ç”¨çš„å†³ç­–æ¨¡å‹

### 5.1 æŠ€æœ¯é€‰å‹å†³ç­–æ ‘

```
éœ€è¦å®ç° LLM åº”ç”¨
    â†“
æ˜¯å¦æœ‰ç‰¹æ®Šåè®®/æµç¨‹ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ è¯„ä¼°æ¡†æ¶æ”¯æŒåº¦
    â”‚        â”œâ”€ æ¡†æ¶æ”¯æŒè‰¯å¥½ â†’ ä½¿ç”¨æ¡†æ¶
    â”‚        â””â”€ æ¡†æ¶ä¸æ”¯æŒ â†’ è‡ªå®šä¹‰å®ç°
    â”‚
    â””â”€ å¦ â†’ æ˜¯å¦éœ€è¦å¿«é€ŸåŸå‹ï¼Ÿ
             â”œâ”€ æ˜¯ â†’ ä½¿ç”¨æ¡†æ¶
             â””â”€ å¦ â†’ è¯„ä¼°å›¢é˜Ÿèƒ½åŠ›
                      â”œâ”€ æœ‰æ¡†æ¶ç»éªŒ â†’ ä½¿ç”¨æ¡†æ¶
                      â””â”€ æ— æ¡†æ¶ç»éªŒ â†’ è‡ªå®šä¹‰å®ç°ï¼ˆæ›´ç®€å•ï¼‰
```

### 5.2 æ”¹é€ å¯è¡Œæ€§è¯„ä¼°è¡¨

åœ¨è€ƒè™‘æ”¹é€ æ—¶ï¼Œå¡«å†™è¿™ä¸ªè¡¨ï¼š

| è¯„ä¼°é¡¹ | å½“å‰çŠ¶æ€ | æ¡†æ¶æ–¹æ¡ˆ | æ”¹é€ éš¾åº¦ | å€¼å¾—å—ï¼Ÿ|
|--------|---------|---------|---------|---------|
| **æ ¸å¿ƒåŠŸèƒ½** | è¿è¡Œè‰¯å¥½ | éœ€è¦é‡å†™ | â­â­â­â­â­ | âŒ |
| **ç‰¹æ®Šéœ€æ±‚** | å®Œç¾æ”¯æŒ | éœ€è¦ç»•è¿‡æ¡†æ¶ | â­â­â­â­â­ | âŒ |
| **æ€§èƒ½** | ä¼˜ç§€ | å¯èƒ½ä¸‹é™ | â­â­â­ | âŒ |
| **åˆ‡æ¢æ¨¡å‹** | éœ€è¦æ”¹ä»£ç  | ä¸€è¡Œåˆ‡æ¢ | â­â­ | âœ… |
| **ç›‘æ§é›†æˆ** | æ‰‹åŠ¨ | è‡ªåŠ¨ | â­â­ | âœ… |
| **ç”Ÿæ€å·¥å…·** | æ—  | ä¸°å¯Œ | â­ | ğŸ¤” æœªæ¥æœ‰ç”¨ |

**æ€»ç»“**ï¼š3 é¡¹ âŒï¼Œ2 é¡¹ âœ…ï¼Œ1 é¡¹ ğŸ¤” â†’ **ä¸å»ºè®®å…¨é¢æ”¹é€ **

**ä¼˜åŒ–æ–¹å‘**ï¼šé’ˆå¯¹ âœ… çš„ä¸¤é¡¹åšå±€éƒ¨æ”¹è¿›ï¼ˆä¾›åº”å•†æŠ½è±¡å±‚ + ä¼˜åŒ–ç›‘æ§ï¼‰

---

### 5.3 é¿å…çš„é™·é˜±

#### é™·é˜± 1ï¼šå®Œç¾ä¸»ä¹‰

**è¡¨ç°**ï¼š
> "è¿™ä¸ªæ¶æ„ä¸å¤Ÿ'ä¼˜é›…'ï¼Œåº”è¯¥ç”¨æœ€æ–°çš„æ¡†æ¶é‡å†™"

**é—®é¢˜**ï¼š
- ğŸš« æµªè´¹æ—¶é—´åœ¨æ¶æ„æœ¬èº«ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡ä»·å€¼
- ğŸš« å¼•å…¥æ–°çš„å¤æ‚åº¦å’Œ bug
- ğŸš« "ä¼˜é›…"æ˜¯ä¸»è§‚çš„ï¼Œ"èƒ½ç”¨"æ‰æ˜¯å®¢è§‚çš„

**è§£è¯**ï¼š
> é—®è‡ªå·±ï¼š**é‡å†™èƒ½ç»™ç”¨æˆ·å¸¦æ¥ä»€ä¹ˆä»·å€¼ï¼Ÿ**
> å¦‚æœç­”æ¡ˆæ˜¯"æ²¡æœ‰"ï¼Œå°±åˆ«æ”¹ã€‚

---

#### é™·é˜± 2ï¼šæ¡†æ¶å´‡æ‹œ

**è¡¨ç°**ï¼š
> "å¤§å®¶éƒ½åœ¨ç”¨ LangChainï¼Œæˆ‘ä¹Ÿè¦ç”¨"

**é—®é¢˜**ï¼š
- ğŸš« ç›²ç›®è·Ÿé£ï¼Œä¸è€ƒè™‘å®é™…éœ€æ±‚
- ğŸš« å¿½è§†å­¦ä¹ æˆæœ¬å’Œç»´æŠ¤æˆæœ¬
- ğŸš« ä¸ºäº†ç”¨æ¡†æ¶è€Œæ‰­æ›²è®¾è®¡

**è§£è¯**ï¼š
> æ¡†æ¶æ˜¯**å·¥å…·**ï¼Œä¸æ˜¯**ç›®æ ‡**ã€‚
> é€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„ã€‚

---

#### é™·é˜± 3ï¼šæ²‰æ²¡æˆæœ¬è°¬è¯¯

**è¡¨ç°**ï¼š
> "å·²ç»èŠ±äº†ä¸€å‘¨ç ”ç©¶ LangChainï¼Œä¸èƒ½ç™½è´¹äº†"

**é—®é¢˜**ï¼š
- ğŸš« ç»§ç»­æŠ•å…¥æ›´å¤šæ—¶é—´åœ¨é”™è¯¯æ–¹å‘
- ğŸš« è¶Šé™·è¶Šæ·±
- ğŸš« æœ€ç»ˆæ¨å€’é‡æ¥ï¼Œæµªè´¹æ›´å¤šæ—¶é—´

**è§£è¯**ï¼š
> åŠæ—¶æ­¢æŸã€‚**å·²æŠ•å…¥çš„æ—¶é—´æ˜¯æ²‰æ²¡æˆæœ¬**ï¼Œ
> åº”è¯¥åŸºäº**æœªæ¥æ”¶ç›Š**åšå†³ç­–ï¼Œä¸æ˜¯è¿‡å»æŠ•å…¥ã€‚

---

## å…­ã€ç»™æœªæ¥è‡ªå·±çš„å»ºè®®

### 6.1 ä»€ä¹ˆæ—¶å€™å¯ä»¥è€ƒè™‘ LangChainï¼Ÿ

#### åœºæ™¯ 1ï¼šéœ€è¦ RAG åŠŸèƒ½

```typescript
// å¦‚æœè¦åšäº§å“æ¨èçš„ RAG
import { Chroma } from "@langchain/community/vectorstores/chroma";
import { OpenAIEmbeddings } from "@langchain/openai";
import { RetrievalQAChain } from "langchain/chains";

// è¿™æ—¶å€™ LangChain ç”Ÿæ€å°±å¾ˆæœ‰ä»·å€¼
const vectorStore = await Chroma.fromDocuments(docs, embeddings);
const chain = RetrievalQAChain.fromLLM(llm, vectorStore.asRetriever());
```

**åˆ¤æ–­**ï¼šå¦‚æœäº§å“æè¿°å¾ˆé•¿ï¼Œéœ€è¦è¯­ä¹‰æœç´¢ â†’ å¯ä»¥ç”¨ LangChain

---

#### åœºæ™¯ 2ï¼šè¦åšå¤æ‚çš„ Multi-Agent

```typescript
// å¦‚æœè¦åšå¤šä¸ª Agent åä½œï¼ˆå¦‚ï¼šæœç´¢ Agent + æ¨è Agent + è®¢å• Agentï¼‰
import { LangGraph } from "langgraph";

// LangGraph é€‚åˆå¤æ‚çš„ Agent ç¼–æ’
const graph = new LangGraph()
  .addNode("search", searchAgent)
  .addNode("recommend", recommendAgent)
  .addNode("order", orderAgent)
  .addEdge("search", "recommend")
  .addEdge("recommend", "order");
```

**åˆ¤æ–­**ï¼šå¦‚æœ Agent é€»è¾‘å˜å¾—éå¸¸å¤æ‚ â†’ è€ƒè™‘ LangGraph

---

#### åœºæ™¯ 3ï¼šå›¢é˜Ÿæ‰©å¤§ï¼Œéœ€è¦æ ‡å‡†åŒ–

**å½“å‰**ï¼š1-2 ä¸ªäººç»´æŠ¤ï¼Œè‡ªå®šä¹‰å®ç°å¾ˆæ¸…æ™°

**æœªæ¥**ï¼šå¦‚æœå›¢é˜Ÿæ‰©å¤§åˆ° 5+ äººï¼Œå¯èƒ½éœ€è¦ï¼š
- æ ‡å‡†åŒ–çš„å¼€å‘æµç¨‹
- ç»Ÿä¸€çš„æ¶æ„æ¨¡å¼
- é™ä½æ–°äººå­¦ä¹ æˆæœ¬

è¿™æ—¶å€™æ¡†æ¶çš„ä»·å€¼å°±ä½“ç°å‡ºæ¥äº†ã€‚

---

### 6.2 å¦‚ä½•å¹³æ»‘è¿ç§»ï¼Ÿ

å¦‚æœæœªæ¥çœŸçš„è¦ç”¨ LangChainï¼Œå»ºè®®ï¼š

#### æ­¥éª¤ 1ï¼šæ–°åŠŸèƒ½å…ˆè¯•æ°´ï¼ˆ1 ä¸ªæœˆï¼‰

```typescript
// ä¾‹å¦‚ï¼šæ–°å¢ä¸€ä¸ª RAG åŠŸèƒ½ï¼Œç”¨ LangChain å®ç°
export async function searchProductsByDescription(query: string) {
  const vectorStore = await getVectorStore();
  const retriever = vectorStore.asRetriever();

  const chain = RetrievalQAChain.fromLLM(llm, retriever);
  const result = await chain.call({ query });

  return result;
}

// è¯„ä¼°ï¼š
// - å¼€å‘æ•ˆç‡å¦‚ä½•ï¼Ÿ
// - æ€§èƒ½å¦‚ä½•ï¼Ÿ
// - å›¢é˜Ÿé€‚åº”åº¦å¦‚ä½•ï¼Ÿ
```

#### æ­¥éª¤ 2ï¼šè¯„ä¼°æ•ˆæœï¼ˆ2 å‘¨ï¼‰

**è¯„ä¼°æŒ‡æ ‡**ï¼š
- âœ… å¼€å‘é€Ÿåº¦æ˜¯å¦æ›´å¿«ï¼Ÿ
- âœ… ä»£ç æ˜¯å¦æ›´æ˜“ç»´æŠ¤ï¼Ÿ
- âœ… æ€§èƒ½æ˜¯å¦å¯æ¥å—ï¼Ÿ
- âœ… å›¢é˜Ÿæ˜¯å¦å–œæ¬¢ï¼Ÿ

**å†³ç­–**ï¼š
- å¦‚æœ âœ… > âŒ â†’ æ‰©å¤§ä½¿ç”¨èŒƒå›´
- å¦‚æœ âŒ > âœ… â†’ ä¿æŒç°çŠ¶æˆ–å›é€€

#### æ­¥éª¤ 3ï¼šæ¸è¿›è¿ç§»ï¼ˆ3-6 ä¸ªæœˆï¼‰

```
è¿ç§»ä¼˜å…ˆçº§ï¼š
1. [é«˜] æ–°åŠŸèƒ½ â†’ 100% ç”¨ LangChain
2. [ä¸­] éæ ¸å¿ƒæ¨¡å— â†’ é€æ­¥è¿ç§»
3. [ä½] æ ¸å¿ƒæ¨¡å— â†’ æœ€åè¿ç§»æˆ–ä¿æŒä¸å˜
```

**åŸåˆ™**ï¼š
- ğŸ¯ ä¸è¦ä¸€æ¬¡æ€§è¿ç§»æ‰€æœ‰ä»£ç 
- ğŸ¯ å…è®¸æ–°æ—§å¹¶å­˜
- ğŸ¯ ç¡®ä¿æ¯ä¸€æ­¥éƒ½å¯å›æ»š

---

## ä¸ƒã€å»¶ä¼¸æ€è€ƒ

### 7.1 é€šç”¨çš„æŠ€æœ¯é€‰å‹åŸåˆ™

#### åŸåˆ™ 1ï¼šä¼˜å…ˆè§£å†³é—®é¢˜ï¼Œå…¶æ¬¡è€ƒè™‘ä¼˜é›…

**æ¡ˆä¾‹**ï¼š
- ğŸ”´ é”™è¯¯ï¼š"è¿™ä¸ªå®ç°ä¸å¤Ÿä¼˜é›…ï¼Œæˆ‘è¦é‡æ„"
- ğŸŸ¢ æ­£ç¡®ï¼š"è¿™ä¸ªå®ç°æœ‰ bug/æ€§èƒ½é—®é¢˜/éš¾ç»´æŠ¤ï¼Œæˆ‘è¦é‡æ„"

**æ ¸å¿ƒ**ï¼š
> **èƒ½ç”¨ > ä¼˜é›… > å®Œç¾**

---

#### åŸåˆ™ 2ï¼šé€‚åº¦æŠ½è±¡ï¼Œä¸è¦è¿‡åº¦è®¾è®¡

**æ¡ˆä¾‹**ï¼š
```typescript
// è¿‡åº¦è®¾è®¡
class AbstractLLMProviderFactoryBuilder {
  buildFactory(): LLMProviderFactory {
    return new ConcreteLLMProviderFactory(
      new LLMProviderConfig(
        new ConfigLoader().load()
      )
    );
  }
}

// é€‚åº¦è®¾è®¡
function createLLMService(provider: string) {
  const config = { apiKey: process.env[`${provider}_API_KEY`] };
  return new providers[provider](config);
}
```

**æ ¸å¿ƒ**ï¼š
> YAGNI (You Aren't Gonna Need It)
> ç­‰çœŸæ­£éœ€è¦æ—¶å†æŠ½è±¡

---

#### åŸåˆ™ 3ï¼šæ€§èƒ½ vs å¼€å‘æ•ˆç‡çš„æƒè¡¡

**åœºæ™¯**ï¼š
- ğŸ“Š **é«˜é¢‘è°ƒç”¨ã€æ€§èƒ½æ•æ„Ÿ**ï¼ˆå¦‚ LLM APIï¼‰â†’ ä¼˜å…ˆæ€§èƒ½
- ğŸ› ï¸ **ä½é¢‘æ“ä½œã€é€»è¾‘å¤æ‚**ï¼ˆå¦‚åå°ä»»åŠ¡ï¼‰â†’ ä¼˜å…ˆå¼€å‘æ•ˆç‡

**æœ¬é¡¹ç›®**ï¼š
- LLM è°ƒç”¨æ˜¯æ ¸å¿ƒè·¯å¾„ â†’ **æ€§èƒ½ä¼˜å…ˆ**
- å› æ­¤è‡ªå®šä¹‰å®ç° > æ¡†æ¶æŠ½è±¡

---

### 7.2 èŒä¸šå‘å±•çš„æ€è€ƒ

#### æ€è€ƒ 1ï¼šäº†è§£æ¡†æ¶ â‰  å¿…é¡»ä½¿ç”¨æ¡†æ¶

**ä»·å€¼**ï¼š
- âœ… **äº†è§£ LangChain**ï¼šçŸ¥é“å®ƒèƒ½åšä»€ä¹ˆã€é€‚åˆä»€ä¹ˆåœºæ™¯
- âœ… **ä¸ç›²ç›®ä½¿ç”¨**ï¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨

**æœ€é«˜å¢ƒç•Œ**ï¼š
> çŸ¥é“æ‰€æœ‰å·¥å…·ï¼Œä½†åªåœ¨åˆé€‚æ—¶ä½¿ç”¨

---

#### æ€è€ƒ 2ï¼šæ·±åº¦ > å¹¿åº¦

**æ¡ˆä¾‹**ï¼š
- ğŸ”´ æµ…å±‚ï¼š"æˆ‘ä¼š 10 ä¸ªæ¡†æ¶"ï¼ˆæ¯ä¸ªéƒ½åªä¼šåŸºç¡€ç”¨æ³•ï¼‰
- ğŸŸ¢ æ·±å±‚ï¼š"æˆ‘æ·±å…¥ç†è§£ LLMã€Streamingã€Tool Calling çš„åŸç†"

**ä»·å€¼**ï¼š
> ç†è§£**åŸç†**åï¼Œä»»ä½•æ¡†æ¶éƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹
> åªä¼šç”¨æ¡†æ¶ï¼Œæ¡†æ¶å˜äº†å°±ä¸ä¼šäº†

---

#### æ€è€ƒ 3ï¼šè§£å†³é—®é¢˜ > ä½¿ç”¨æ–°æŠ€æœ¯

**ä¼ä¸šè§†è§’**ï¼š
- ä¼ä¸šè¦çš„æ˜¯**è§£å†³é—®é¢˜**
- ä¸æ˜¯"ç”¨äº†æœ€æ–°çš„æŠ€æœ¯æ ˆ"

**ä¸ªäººæˆé•¿**ï¼š
- æŠ€æœ¯æ˜¯**æ‰‹æ®µ**ï¼Œä¸æ˜¯**ç›®çš„**
- èšç„¦ï¼š**å¦‚ä½•æ›´å¥½åœ°è§£å†³é—®é¢˜**

---

## å…«ã€æ€»ç»“

### 8.1 æ ¸å¿ƒç»“è®º

**é—®é¢˜**ï¼šæ”¹é€ æˆ LangChain ä¼šä¸ä¼šå¾ˆå¤æ‚ï¼Ÿ

**ç­”æ¡ˆ**ï¼šğŸŸ¡ **å¤æ‚åº¦ä¸­ç­‰ï¼ˆ10-15 å¤©ï¼‰ï¼Œä½†ä¸å»ºè®®å…¨é¢æ”¹é€ **

**åŸå› **ï¼š
1. âŒ MCP åè®®ç‰¹æ®Šï¼ŒLangChain ä¸æ”¯æŒ
2. âŒ å½“å‰æ¶æ„å·²ç»å¾ˆå¥½ï¼Œæ”¹é€ æ”¶ç›Šä¸å¤§
3. âŒ æ”¹é€ é£é™©é«˜ï¼Œå¯èƒ½å¼•å…¥æ–°é—®é¢˜
4. âœ… å¯ä»¥å±€éƒ¨ä¼˜åŒ–ï¼ˆä¾›åº”å•†æŠ½è±¡å±‚ï¼‰
5. âœ… æœªæ¥æœ‰éœ€è¦å†æ¸è¿›å¼•å…¥

---

### 8.2 å…³é”®æ´å¯Ÿ

1. **æ¡†æ¶ä¸æ˜¯é“¶å¼¹**
   - é€‚åˆæ ‡å‡†åœºæ™¯ï¼Œä¸é€‚åˆç‰¹æ®Šåœºæ™¯
   - æœ¬é¡¹ç›®æœ‰ MCP è¿™ç§ç‰¹æ®Šéœ€æ±‚

2. **æ§åˆ¶æƒå¾ˆé‡è¦**
   - å¤æ‚æµç¨‹ï¼ˆOAuthã€å¤šç±»å‹äº‹ä»¶ï¼‰éœ€è¦ç²¾ç»†æ§åˆ¶
   - æ¡†æ¶çš„ Agent Executor ä¸å¤Ÿçµæ´»

3. **ç®€å• > å¤æ‚**
   - å½“å‰è‡ªå®šä¹‰å®ç°æ¸…æ™°æ˜“æ‡‚
   - æ¡†æ¶æŠ½è±¡å¯èƒ½å¸¦æ¥ä¸å¿…è¦çš„å¤æ‚åº¦

4. **æ¸è¿›å¼ä¼˜å…ˆ**
   - ä¸åšå¤§çˆ†ç‚¸é‡æ„
   - é’ˆå¯¹ç—›ç‚¹å±€éƒ¨ä¼˜åŒ–
   - æ–°åŠŸèƒ½å¯ä»¥å°è¯•æ¡†æ¶

5. **æŠ€æœ¯æœåŠ¡ä¸šåŠ¡**
   - ä¸ä¸ºäº†"æ ‡å‡†"è€Œæ”¹é€ 
   - èšç„¦ç”¨æˆ·ä»·å€¼
   - ä¿æŒåŠ¡å®æ€åº¦

---

### 8.3 è¡ŒåŠ¨å»ºè®®

**çŸ­æœŸï¼ˆç°åœ¨ï¼‰**ï¼š
- âœ… ä¿æŒç°æœ‰æ¶æ„
- âœ… åˆ›å»ºä¾›åº”å•†æŠ½è±¡å±‚ï¼ˆæ”¯æŒå¤šæ¨¡å‹åˆ‡æ¢ï¼‰
- âœ… ä¼˜åŒ– Langfuse é›†æˆ

**ä¸­æœŸï¼ˆ3-6 ä¸ªæœˆï¼‰**ï¼š
- ğŸ”„ æ–°åŠŸèƒ½ï¼ˆå¦‚ RAGï¼‰è€ƒè™‘ç”¨ LangChain
- ğŸ”„ è¯„ä¼°æ•ˆæœï¼Œå†³å®šæ˜¯å¦æ‰©å¤§ä½¿ç”¨

**é•¿æœŸï¼ˆ1 å¹´+ï¼‰**ï¼š
- ğŸ“Š æ ¹æ®ä¸šåŠ¡å‘å±•å†³å®š
- ğŸ“Š å¦‚æœéœ€è¦å¤æ‚ Agentï¼Œè€ƒè™‘ LangGraph
- ğŸ“Š å¦‚æœä¿æŒç®€å•ï¼Œç»§ç»­ç°æœ‰æ¶æ„

---

### 8.4 ä»·å€¼ä¸æ„ä¹‰

**è¿™æ¬¡è®¨è®ºçš„ä»·å€¼**ï¼š
- ğŸ’¡ é¿å…äº†ä¸å¿…è¦çš„é‡æ„ï¼ˆèŠ‚çœ 10-15 å¤©ï¼‰
- ğŸ’¡ æ˜ç¡®äº†æ”¹è¿›æ–¹å‘ï¼ˆä¾›åº”å•†æŠ½è±¡å±‚ï¼‰
- ğŸ’¡ å»ºç«‹äº†æŠ€æœ¯é€‰å‹æ€ç»´æ¡†æ¶
- ğŸ’¡ ç†è§£äº†"é€‚åˆ > æ ‡å‡†"çš„åŸåˆ™

**å¯å¤ç”¨çš„ç»éªŒ**ï¼š
- ğŸ¯ å¦‚ä½•è¯„ä¼°æ”¹é€ å¤æ‚åº¦
- ğŸ¯ å¦‚ä½•å¹³è¡¡æ§åˆ¶æƒå’Œä¾¿åˆ©æ€§
- ğŸ¯ å¦‚ä½•åšæ¸è¿›å¼æ¶æ„æ¼”è¿›
- ğŸ¯ å¦‚ä½•é¿å…æŠ€æœ¯é€‰å‹é™·é˜±

---

**æœ€åä¸€å¥è¯**ï¼š

> æœ€å¥½çš„æ¶æ„ä¸æ˜¯æœ€"æ ‡å‡†"çš„ï¼Œ
> ä¹Ÿä¸æ˜¯æœ€"ä¼˜é›…"çš„ï¼Œ
> è€Œæ˜¯æœ€**é€‚åˆå½“ä¸‹éœ€æ±‚**ï¼Œ
> åŒæ—¶ä¿æŒ**æ¼”è¿›ç©ºé—´**çš„ã€‚

---

**è®°å½•æ—¶é—´**ï¼š2025-12-07
**ä½œè€…**ï¼šClaude & ZT
**å…³é”®è¯**ï¼š`æ¶æ„å†³ç­–` `æŠ€æœ¯é€‰å‹` `LangChain` `è‡ªå®šä¹‰å®ç°` `MCPåè®®` `æ¸è¿›å¼æ¼”è¿›`
**é˜…è¯»æ—¶é•¿**ï¼šçº¦ 30 åˆ†é’Ÿ

**ç›¸å…³ç¬”è®°**ï¼š
- [01-æŠ€æœ¯æ¶æ„è§£æ.md](./01-æŠ€æœ¯æ¶æ„è§£æ.md) - äº†è§£å½“å‰æ¶æ„
- [05-Langfuseç›‘æ§é›†æˆå®æˆ˜.md](./05-Langfuseç›‘æ§é›†æˆå®æˆ˜.md) - ç›‘æ§ç³»ç»Ÿå®ç°
